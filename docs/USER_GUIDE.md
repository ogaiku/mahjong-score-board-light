# ユーザーガイド

## 📖 麻雀スコアボード - 使い方

---

## 🎯 基本的な使い方

### 1. Webサイトにアクセス

デプロイされたWebサイトのURLにアクセスします。

**公開URL例**:
```
https://ogaiku.github.io/mahjong-score-tracker/
```

---

## 📝 対戦記録の入力

### 方法1: ヘッダーボタンから（推奨）

1. Webサイト上部の **「📝 記録入力」** ボタンをクリック
2. Googleフォームが新しいタブで開きます
3. 必要な情報を入力して送信

### 方法2: フッターリンクから

1. ページ下部（フッター）の **「📝 対戦記録入力」** リンクをクリック
2. Googleフォームが開きます

### 入力項目

| 項目 | 必須 | 説明 |
|------|------|------|
| **対戦日** | ✅ | 対戦した日付 |
| **対戦時刻** | - | 対戦開始時刻（任意） |
| **対戦タイプ** | ✅ | 四麻東風/四麻半荘/三麻東風/三麻半荘 |
| **プレイヤー1名** | ✅ | 1位〜4位のプレイヤー名 |
| **プレイヤー1点数** | ✅ | 最終点棒（例: 28000） |
| **プレイヤー2名** | ✅ | |
| **プレイヤー2点数** | ✅ | |
| **プレイヤー3名** | ✅ | |
| **プレイヤー3点数** | ✅ | |
| **プレイヤー4名** | - | 四麻の場合のみ |
| **プレイヤー4点数** | - | 四麻の場合のみ |
| **メモ** | - | 特記事項（任意） |

### 📱 スマートフォンからの入力

Googleフォームはモバイル最適化されているため、スマートフォンから快適に入力できます。

**おすすめ手順**:
1. 対戦記録フォームのURLをLINEグループで共有
2. 対戦終了後、スマホからすぐに入力
3. Webサイトで更新ボタンを押して結果を確認

---

## 👥 プレイヤー管理

### プレイヤーの追加

1. フッターの **「👥 プレイヤー管理」** リンクをクリック
2. 「操作」で **「プレイヤーを追加」** を選択
3. 「プレイヤー名（追加時）」に新しいプレイヤー名を入力
4. 送信

**自動更新**: プレイヤーを追加すると、対戦記録フォームのプレイヤー選択リストが自動的に更新されます！

### プレイヤー名の変更

1. フッターの **「👥 プレイヤー管理」** リンクをクリック
2. 「操作」で **「プレイヤー名を変更」** を選択
3. 「変更対象プレイヤー（変更時）」で変更したいプレイヤーを選択
4. 「新しいプレイヤー名（変更時）」に新しい名前を入力
5. 送信

**自動更新**: 名前を変更すると、フォームのプレイヤーリストも自動的に更新されます。

---

## 📊 統計・ランキングの閲覧

### ランキングタブ

総合ランキングと統計グラフを表示します。

**表示内容**:
- 順位
- プレイヤー名
- 対戦数
- 平均スコア（新スコア方式）
- 平均順位
- 1位率
- 順位分布

**グラフ**:
- 平均スコア比較（棒グラフ）
- 順位分布（積み上げ棒グラフ）

**操作**:
- プレイヤー名をクリックすると、プレイヤー統計タブに移動して詳細を表示

### 最近の対戦タブ

直近の対戦記録を表示します（デフォルト: 20件）。

**機能**:
- **検索**: プレイヤー名で絞り込み
- **フィルター**: 対戦タイプで絞り込み
  - 四麻東風
  - 四麻半荘
  - 三麻東風
  - 三麻半荘

**表示内容**:
- 対戦日時
- 対戦タイプ
- 各プレイヤーの順位と点数
- メモ（入力されている場合）

### プレイヤー統計タブ

個別プレイヤーの詳細統計を表示します。

**手順**:
1. 「プレイヤーを選択...」ドロップダウンからプレイヤーを選択
2. 自動的に統計とグラフを表示

**表示内容**:
- 対戦数
- 平均スコア
- 平均順位
- 1位率
- 最高点棒
- 最低点棒

**グラフ**:
- スコア推移（折れ線グラフ）
- 順位分布（円グラフ）

### 対戦比較タブ

2人のプレイヤーの直接対決成績を表示します。

**手順**:
1. 「プレイヤー1を選択...」ドロップダウンからプレイヤーを選択
2. 「プレイヤー2を選択...」ドロップダウンからプレイヤーを選択
3. **「比較」** ボタンをクリック

**表示内容**:
- 総対戦数
- 各プレイヤーの勝数
- 引き分け数
- 勝率
- 対戦履歴一覧

---

## 🔄 データの更新

### 自動更新

デフォルトで **60秒ごと** にデータを自動更新します。

設定変更（`config.js`）:
```javascript
REFRESH_INTERVAL: 60000  // ミリ秒（60000 = 60秒）
```

自動更新を無効化:
```javascript
REFRESH_INTERVAL: 0
```

### 手動更新

右上の **「🔄 更新」** ボタンをクリックすると、即座に最新データを取得します。

**タイミング**:
- 対戦記録を入力した直後
- 他の人が記録を追加したとき
- データの変更を確認したいとき

---

## 🎨 シーズン管理

### シーズンの切り替え

右上の **「シーズン選択」** ドロップダウンからシーズンを選択します。

**動作**:
- 選択したシーズンのデータのみを表示
- ランキング、統計、対戦記録すべてがシーズン別に表示

### 新しいシーズンの作成

**手順**（GAS側で実施）:
1. 設定スプレッドシートに新しいシーズンを追加
2. Webサイトで更新ボタンをクリック
3. シーズン選択ドロップダウンに新しいシーズンが表示される

---

## 💡 便利な使い方

### 1. ブックマーク登録

よく使うURLをブックマークに登録しましょう：

**Webサイト（閲覧用）**:
```
https://ogaiku.github.io/mahjong-score-tracker/
```

**対戦記録フォーム（入力用）**:
```
https://docs.google.com/forms/d/e/1FAIpQLSdeDHH9OyDtz7lxwRl5cW1lVrMKcDSwunFVJ-8vQ1dSbDNhHQ/viewform
```

### 2. LINEグループで共有

対戦記録フォームのURLをLINEグループに投稿しておくと便利です：

```
📝 対戦記録入力フォーム
https://docs.google.com/forms/d/e/1FAIpQLSdeDHH9OyDtz7lxwRl5cW1lVrMKcDSwunFVJ-8vQ1dSbDNhHQ/viewform

🌐 スコアボード（閲覧）
https://ogaiku.github.io/mahjong-score-tracker/
```

### 3. QRコード作成

スマートフォンから簡単にアクセスできるよう、QRコードを作成して印刷：

**無料QRコード生成サイト**:
- https://www.qrcode-monkey.com/
- https://qr.quel.jp/

### 4. ホーム画面に追加（スマホ）

**iPhoneの場合**:
1. Safariでサイトを開く
2. 共有アイコンをタップ
3. 「ホーム画面に追加」を選択

**Androidの場合**:
1. Chromeでサイトを開く
2. メニュー（︙）をタップ
3. 「ホーム画面に追加」を選択

---

## 🔧 トラブルシューティング

### データが表示されない

**原因**: シーズンが選択されていない、またはデータがない

**解決方法**:
1. 「シーズン選択」ドロップダウンを確認
2. 正しいシーズンを選択
3. 更新ボタン（🔄）をクリック

### フォームが開けない

**原因**: フォームの共有設定、またはネットワーク接続

**解決方法**:
1. インターネット接続を確認
2. ブラウザのキャッシュをクリア
3. 別のブラウザで試す
4. フォームの共有設定を確認（管理者に連絡）

### グラフが表示されない

**原因**: Chart.jsの読み込み失敗

**解決方法**:
1. ページを再読み込み（F5）
2. インターネット接続を確認
3. ブラウザのコンソール（F12）でエラーを確認

### プレイヤーリストが更新されない

**原因**: フォームの自動更新が動作していない

**解決方法**:
1. プレイヤー追加後、少し待つ（数秒）
2. フォームを再読み込み
3. ブラウザのキャッシュをクリアして再度開く

---

## 📱 モバイル最適化

### スマートフォンでの操作

**推奨ブラウザ**:
- iOS: Safari
- Android: Chrome

**操作方法**:
- タップで選択
- スワイプでスクロール
- ピンチで拡大縮小

### レスポンシブデザイン

画面サイズに応じて自動的にレイアウトが調整されます：

- **PC**: 3カラムレイアウト
- **タブレット**: 2カラムレイアウト
- **スマホ**: 1カラムレイアウト

---

## 📊 スコア計算方式

### 新スコア計算式

```
[点数] = ([ゲーム終了時の点棒] - [ゲーム開始時の点棒]) ÷ 1000 
       + [順位に応じたウマ] + [参加得点]
```

### 設定値

| 項目 | 四麻 | 三麻 |
|------|------|------|
| **開始点棒** | 25,000点 | 35,000点 |
| **1位ウマ** | +15 | +15 |
| **2位ウマ** | +5 | ±0 |
| **3位ウマ** | -5 | -15 |
| **4位ウマ** | -15 | - |
| **参加得点** | +10 | +10 |

### 計算例

**四麻半荘の場合**:
- 1位: 35,000点 → `(35000-25000)/1000 + 15 + 10 = +35pt`
- 2位: 28,000点 → `(28000-25000)/1000 + 5 + 10 = +18pt`
- 3位: 22,000点 → `(22000-25000)/1000 + (-5) + 10 = +2pt`
- 4位: 15,000点 → `(15000-25000)/1000 + (-15) + 10 = -15pt`

合計: 35 + 18 + 2 + (-15) = 40pt（参加得点 10pt × 4人）

---

## 🎉 まとめ

### 基本操作フロー

1. **対戦記録を入力**
   - ヘッダーの「📝 記録入力」ボタンをクリック
   - Googleフォームで情報を入力

2. **統計を確認**
   - Webサイトで「🔄 更新」ボタンをクリック
   - ランキングタブで順位を確認

3. **詳細を見る**
   - プレイヤー名をクリックして個別統計を表示
   - 対戦比較タブで直接対決を確認

### よくある質問

**Q: 過去の記録を修正できますか？**
A: 現在はGoogleスプレッドシートから直接編集する必要があります。

**Q: 記録を削除できますか？**
A: 管理者権限でGoogleスプレッドシートから削除できます。

**Q: プレイヤーを削除するとどうなりますか？**
A: 過去の記録は残りますが、新しい対戦では選択できなくなります。

**Q: 複数のシーズンを同時に見れますか？**
A: シーズン選択で切り替えて閲覧できますが、同時表示はできません。

---

**🀄 楽しい麻雀ライフを！**
